\section{Testing}
To assert the accuracy of the results in the context of the source data, unit tests were used during the programming of the nETL application, along with an analysis of a small sample of the data to test accuracy of the output CSV. Unit tests for nETL are written using the open source JavaScript \textit{Mocha} testing framework \cite{mochaTest}, the code of which is included in the appendix at \ref{unit-tests}.

\subsection{nETL Unit Tests}
The basic premise of the ETL process is that the lines are extracted from CSVs and loaded into CouchDB reliably. Assertions are used to ensure that each nETL module (the extraction module, the transformation modules, and the loading module) perform as expected. No integration tests are performed except by manually checking that the test data is loaded into CouchDB in the anticipated format - which is indeed the case.

Tests relating to CSV-line extraction (Appendix \ref{FLATFILE-tests}) assert that all lines from the CSV are extracted iteratively and not all loaded into memory at once, and that all lines are extracted from CSVs.

The process of converting text lines to objects requires extensive test coverage due to the nature since many of the fields contain ASCII characters used for demarcating value separation in CSVs (for example, the comma). Tests ensure that CSVs are treated according to the RFC 4180 spec and treat qualifiers correctly, hat the columns line up correctly with the headers, that values are handled correctly, and that lines are correctly transformed into JavaScript objects (Appendix \ref{TEXT_LINE_TO_OBJ-tests}). In terms of filtering lines, unit tests (Appendix \ref{FILTER-tests}) ensure that objects may be filtered for individual values for up to multiple attributes, that objects can be filtered any number of values on any number of attributes, and that filtering is done on an all-or-nothing-basis (objects either meet all filter requirements or are returned as ``null''). Unit tests (Appendices \ref{CREATE_OBJECT_FIELD-tests} and \ref{WHITELIST-tests}) assert that creation and whitelisting of attributes works as expected,

Tests that demonstrate correctness of nETL's CouchDB-loading module (Appendix \ref{COUCHDB-tests}) consist of a single unit test that inserts 3 documents into CouchDB via the the \_bulk\_docs API, with the assertion that a 201 HTTP response is returned in a promise.

\subsection{Map \& List Function tests}
These tests are discussed in terms of sample CSV files for each data entity with the aim of emulating as many cases that the ETL and CouchDB functions need to handle as possible. The CSV files used for these tests are the same as used as examples for the data previously in Figure \ref{fig-sample-csv-files} containing fabricated-but-true-to-form data for redacted StudentIDs: 1, 2, 3, 4, and 5. The Benchmark CSV contains a single row for each ID, the Events CSV contains several rows for each ID, and the Grades CSV has either one or two rows per ID. The StudentID of 5 is included as a means of testing the filtering process and shouldn't be included in any of the results.

With reference to the source CSV files it is shown the logic of the Map function is correct, and the the List function's logic is also correct when processing index output and performing the join. As shown in the view-output of the 2-way and 3-way join in Figure \ref{fig-test-map-output},

As shown in the List function output for the 2-way and 3-way join in Figure \ref{fig-test-list-output}...

\newpage
\input{7-discussion/figures/fig-test-map-output}
\newpage
\input{7-discussion/figures/fig-test-list-output}
\newpage