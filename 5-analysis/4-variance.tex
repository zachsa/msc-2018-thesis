\section{Benchmark Variance}
A \nth{3} analysis is done on the Benchmark data to assess the variances of each of the benchmarks evaluated. To achieve this, a single nETL task is run to load a database with Benchmarks data for all students who attended CSC1015F in either 2014, 2015, or 2016 (or attended the course multiple times). The JSON used for configuring nETL to load data from \textit{Benchmarks (2014 - 2016).csv} into CouchDB is included in Appendix \ref{netl-task-6-config}, which is identical to the \textit{Task 1} configuration, except that a different database is used.

Data in CouchDB is mapped to an index ordered by a single value (\textit{Student ID}), and not a compound key as used in previous analyses. The index consists as a list of \mintinline{text}{[StudentID:[b1, b2, b3, b4, etc.]]} key:value pairs where \mintinline{text}{b} stands for ``benchmark''. All the benchmarks shown in Table \ref{tbl-correlation-variance} are included in the index either as a direct emission of values from the \textit{benchmarks} documents, or as aggregations (averages) of individual benchmark scores. Index values are reduced using the \_stats function without grouping to find the aggregated result of all students' admission benchmarks. In other works, a single row of reduced output is retrieved from the index via the address \url{http://127.0.0.1:5984/variance/_design/variance/_view/variance.csv?reduce=true&group=false}. This output is shown in Figure \ref{fig-variance-reduce-output}



in fact, since the results of this analysis is the coefficient of variation for each used benchmark, a List function is not required at all. Instead the coefficient of variation of each benchmark analyzed is read directly from the MapReduce output (i.e. the view-index).

\subsection{Map Function}
The map function for this analysis is included in the appendix (see \ref{variance-map-function}). Each document passed to the map function is treated according to the logic shown in the activity diagram in Figure \ref{fig-variance-map-function}. On Map function execution the ``type\_'' attribute is checked. If the document is not of type ``benchmark'', Map function execution is terminated, otherwise benchmarks are retrieved from the document, averages of combined benchmarks are calculated, and a tuple of the form \mintinline{text}{[StudentId: [benchmarks]]} is output by the Map function.

Similarly to other Map function processing of benchmark documents, a normalization of grade symbols to percentages is performed via a nested function within the Map function, and according to the logic as discussed previously and shown in in Table \ref{tbl-benchmarks-normalize}. However, unlike with previous analyses, integer-based calculations are performed in the JavaScript code during Map function execution. All numbers in JavaScript are 64-bit Floating Point following the IEEE 754 standard \cite{floatingPoint}. As such, working with rational numbers with decimal points results in peculiarities compared to expectations of how base-10 arithmetic works. A typical example is demonstrated by the sum: ``$0.1 + 0.2 = 0.30000000000000004$''. Quantifying the margin for these errors and handling these cases correctly is difficult \cite{Goldberg1991}, so an open-source library (\texttt{decimal.js} \cite{decimaljs}) is used to handle integer division in the Map function. (CouchDB supports the commonJS specification for module loading of JavaScript libraries in the context of Map function execution \cite{commonJsMapFn}.)

\input{5-analysis/figures/fig-variance-map-function}

\subsection{List Function}
The list function is used to retrieve the variance and Standard Deviation of each of the benchmarks as tested for correlation against course results.