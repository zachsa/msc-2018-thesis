\section{nETL Engine}
\subsection{Sequential Batch Iterator}
\label{netl-batch-generator}
\begin{minted}{text}
const batches = (function*() {
    var finished = false;
    while (!finished) {
        let data = [];
        for (let i = 0; i < batchSize; i++) {
            let datum = extraction.getNext();
            if (datum.done) {
                finished = true;
                break
            };
            data.push(datum.value);
        };
        yield data;
    };
})();

// Iteratively generate next batch
batch = batches.next();
\end{minted}





\subsection{Recursive ETL Iteration}
\label{netl-task-iterator}
\begin{minted}{text}
while (!batch.done) {
    values = batch.value;
    payload = await values.reduce(async(previousResults, item) => {
        const results = await previousResults;
        await asyncForEach(transformations, async(t) => {
            item = await t.transform.call(t, item);
        });
        if (item !== {} && item) results.push(item);
        return results;
    }, []);
    loadResult = await load.batch(payload);
    batch = batches.next();
};
\end{minted}

\section{nETL Modules}
\label{netl-modules}

\subsection{Module Authoring and Loading}
\label{netl-module-loading}

